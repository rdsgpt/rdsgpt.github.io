import{renderString}from"./codemirror-render.js";import{cppLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-cpp.js";import{cssLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-css.js";import{htmlLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-html.js";import{javaLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-java.js";import{javascriptLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-javascript.js";import{jsonLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-json.js";import{markdownLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-markdown.js";import{phpLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-php.js";import{pythonLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-python.js";import{rustLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-rust.js";import{wastLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-wast.js";import{xmlLanguage}from"https://codemirror.net/try/mods/@codemirror-lang-xml.js";var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(e){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,t=0,n={},a={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(r){return r instanceof o?new o(r.type,e(r.content),r.alias):Array.isArray(r)?r.map(e):r.replace(/\u00a0/g,"&nbsp;")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function e(r,t){var n,o;switch(t=t||{},a.util.type(r)){case"Object":if(o=a.util.objId(r),t[o])return t[o];for(var i in n={},t[o]=n,r)r.hasOwnProperty(i)&&(n[i]=e(r[i],t));return n;case"Array":return o=a.util.objId(r),t[o]?t[o]:(n=[],t[o]=n,r.forEach((function(r,a){n[a]=e(r,t)})),n);default:return r}},getLanguage:function(e){for(;e;){var t=r.exec(e.className);if(t)return t[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,t){e.className=e.className.replace(RegExp(r,"gi"),""),e.classList.add("language-"+t)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(n){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(n.stack)||[])[1];if(e){var r=document.getElementsByTagName("script");for(var t in r)if(r[t].src==e)return r[t]}return null}},isActive:function(e,r,t){for(var n="no-"+r;e;){var a=e.classList;if(a.contains(r))return!0;if(a.contains(n))return!1;e=e.parentElement}return!!t}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(e,r){var t=a.util.clone(a.languages[e]);for(var n in r)t[n]=r[n];return t},insertBefore:function(e,r,t,n){var o=(n=n||a.languages)[e],i={};for(var s in o)if(o.hasOwnProperty(s)){if(s==r)for(var l in t)t.hasOwnProperty(l)&&(i[l]=t[l]);t.hasOwnProperty(s)||(i[s]=o[s])}var u=n[e];return n[e]=i,a.languages.DFS(a.languages,(function(r,t){t===u&&r!=e&&(this[r]=i)})),i},DFS:function e(r,t,n,o){o=o||{};var i=a.util.objId;for(var s in r)if(r.hasOwnProperty(s)){t.call(r,s,r[s],n||s);var l=r[s],u=a.util.type(l);"Object"!==u||o[i(l)]?"Array"!==u||o[i(l)]||(o[i(l)]=!0,e(l,t,s,o)):(o[i(l)]=!0,e(l,t,null,o))}}},plugins:{},highlightAll:function(e,r){a.highlightAllUnder(document,e,r)},highlightAllUnder:function(e,r,t){var n={callback:t,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",n),n.elements=Array.prototype.slice.apply(n.container.querySelectorAll(n.selector)),a.hooks.run("before-all-elements-highlight",n);for(var o,i=0;o=n.elements[i++];)a.highlightElement(o,!0===r,n.callback)},highlightElement:function(r,t,n){var o=a.util.getLanguage(r),i=a.languages[o];a.util.setLanguage(r,o);var s=r.parentElement;s&&"pre"===s.nodeName.toLowerCase()&&a.util.setLanguage(s,o);var l={element:r,language:o,grammar:i,code:r.textContent};function u(e){e.endsWith("\n")&&(e=e.slice(0,e.length-1)),l.highlightedCode=e,a.hooks.run("before-insert",l);var r=l.language.toLowerCase(),t=["c++","cpp"].includes(r)?cppLanguage:"css"===r?cssLanguage:["html","xhtml"].includes(r)?htmlLanguage:"java"===r?javaLanguage:["javascript","ecmascript","js","node"].includes(r)?javascriptLanguage:["json","json5"].includes(r)?jsonLanguage:"jsx"===r?javascriptLanguage.configure({dialect:"jsx"}):"markdown"===r?markdownLanguage:["php","php3","php4","php5","php7","phtml"].includes(r)?phpLanguage:"python"===r?pythonLanguage:"rust"===r?rustLanguage:"tsx"===r?javascriptLanguage.configure({dialect:"jsx ts"},"typescript"):["typescript","ts"].includes(r)?javascriptLanguage.configure({dialect:"ts"},"typescript"):"webassembly"===r?wastLanguage:["xml","rss","wsdl","xsd"].includes(r)?xmlLanguage:null;l.element.innerHTML=renderString(l.highlightedCode,{langProvider:t}).codeLinesOnly,a.hooks.run("after-highlight",l),a.hooks.run("complete",l),n&&n.call(l.element)}if(a.hooks.run("before-sanity-check",l),(s=l.element.parentElement)&&"pre"===s.nodeName.toLowerCase()&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","0"),!l.code)return a.hooks.run("complete",l),void(n&&n.call(l.element));if(a.hooks.run("before-highlight",l),l.grammar)if(t&&e.Worker){var g=new Worker(a.filename);g.onmessage=function(e){u(e.data)},g.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else u(a.highlight(l.code,l.grammar,l.language));else u(a.util.encode(l.code))},highlight:function(e,r,t){var n={code:e,grammar:r,language:t};if(a.hooks.run("before-tokenize",n),!n.grammar)throw new Error('The language "'+n.language+'" has no grammar.');return n.tokens=a.tokenize(n.code,n.grammar),a.hooks.run("after-tokenize",n),o.stringify(a.util.encode(n.tokens),n.language)},tokenize:function(e,r){var t=r.rest;if(t){for(var n in t)r[n]=t[n];delete r.rest}var a=new l;return u(a,a.head,e),s(e,a,r,a.head,0),function(e){var r=[],t=e.head.next;for(;t!==e.tail;)r.push(t.value),t=t.next;return r}(a)},hooks:{all:{},add:function(e,r){var t=a.hooks.all;t[e]=t[e]||[],t[e].push(r)},run:function(e,r){var t=a.hooks.all[e];if(t&&t.length)for(var n,o=0;n=t[o++];)n(r)}},Token:o};function o(e,r,t,n){this.type=e,this.content=r,this.alias=t,this.length=0|(n||"").length}function i(e,r,t,n){e.lastIndex=r;var a=e.exec(t);if(a&&n&&a[1]){var o=a[1].length;a.index+=o,a[0]=a[0].slice(o)}return a}function s(e,r,t,n,l,c){for(var d in t)if(t.hasOwnProperty(d)&&t[d]){var m=t[d];m=Array.isArray(m)?m:[m];for(var h=0;h<m.length;++h){if(c&&c.cause==d+","+h)return;var p=m[h],f=p.inside,v=!!p.lookbehind,y=!!p.greedy,x=p.alias;if(y&&!p.pattern.global){var L=p.pattern.toString().match(/[imsuy]*$/)[0];p.pattern=RegExp(p.pattern.source,L+"g")}for(var j=p.pattern||p,k=n.next,w=l;k!==r.tail&&!(c&&w>=c.reach);w+=k.value.length,k=k.next){var b=k.value;if(r.length>e.length)return;if(!(b instanceof o)){var A,P=1;if(y){if(!(A=i(j,w,e,v))||A.index>=e.length)break;var E=A.index,S=A.index+A[0].length,O=w;for(O+=k.value.length;E>=O;)O+=(k=k.next).value.length;if(w=O-=k.value.length,k.value instanceof o)continue;for(var C=k;C!==r.tail&&(O<S||"string"==typeof C.value);C=C.next)P++,O+=C.value.length;P--,b=e.slice(w,O),A.index-=w}else if(!(A=i(j,0,b,v)))continue;E=A.index;var N=A[0],W=b.slice(0,E),_=b.slice(E+N.length),M=w+b.length;c&&M>c.reach&&(c.reach=M);var z=k.prev;if(W&&(z=u(r,z,W),w+=W.length),g(r,z,P),k=u(r,z,new o(d,f?a.tokenize(N,f):N,x,N)),_&&u(r,k,_),P>1){var I={cause:d+","+h,reach:M};s(e,r,t,k.prev,w,I),c&&I.reach>c.reach&&(c.reach=I.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},r={value:null,prev:e,next:null};e.next=r,this.head=e,this.tail=r,this.length=0}function u(e,r,t){var n=r.next,a={value:t,prev:r,next:n};return r.next=a,n.prev=a,e.length++,a}function g(e,r,t){for(var n=r.next,a=0;a<t&&n!==e.tail;a++)n=n.next;r.next=n,n.prev=r,e.length-=a}if(e.Prism=a,o.stringify=function e(r,t){if("string"==typeof r)return r;if(Array.isArray(r)){var n="";return r.forEach((function(r){n+=e(r,t)})),n}var o={type:r.type,content:e(r.content,t),tag:"span",classes:["token",r.type],attributes:{},language:t},i=r.alias;i&&(Array.isArray(i)?Array.prototype.push.apply(o.classes,i):o.classes.push(i)),a.hooks.run("wrap",o);var s="";for(var l in o.attributes)s+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+s+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener?(a.disableWorkerMessageHandler||e.addEventListener("message",(function(r){var t=JSON.parse(r.data),n=t.language,o=t.code,i=t.immediateClose;e.postMessage(a.highlight(o,a.languages[n],n)),i&&e.close()}),!1),a):a;var c=a.util.currentScript();function d(){a.manual||a.highlightAll()}if(c&&(a.filename=c.src,c.hasAttribute("data-manual")&&(a.manual=!0)),!a.manual){var m=document.readyState;"loading"===m||"interactive"===m&&c&&c.defer?document.addEventListener("DOMContentLoaded",d):window.requestAnimationFrame?window.requestAnimationFrame(d):window.setTimeout(d,16)}return a}(_self);
